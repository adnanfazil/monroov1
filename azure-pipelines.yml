trigger:
  branches:
    include:
      - main

pool:
  name: 'Default'  # or the name of your custom pool with the self-hosted agent

steps:
- task: UseNode@2
  inputs:
    versionSpec: '20.x' # Use the appropriate Node.js version
    checkLatest: true

- script: |
    npm install
    npm run build # Optional: If your package requires a build step
  displayName: 'Install and Build'

- script: |
    echo "//registry.npmjs.org/:_authToken=$(NPM_TOKEN)" > ~/.npmrc
    npm publish
  env:
    NPM_TOKEN: $(npm_token)  # Define this in your pipeline variables
  displayName: 'Publish to NPM'
